function diff_match_patch(){this.Diff_Timeout=1.0;this.Diff_EditCost=4;this.Match_Threshold=0.5;this.Match_Distance=1000;this.Patch_DeleteThreshold=0.5;this.Patch_Margin=4;this.Match_MaxBits=32}var DIFF_DELETE=-1;var DIFF_INSERT=1;var DIFF_EQUAL=0;diff_match_patch.Diff;diff_match_patch.prototype.diff_main=function(a,b,c,d){if(typeof d=='undefined'){if(this.Diff_Timeout<=0){d=Number.MAX_VALUE}else{d=(new Date).getTime()+this.Diff_Timeout*1000}}var e=d;if(a==null||b==null){throw new Error('Null input. (diff_main)');}if(a==b){if(a){return[[DIFF_EQUAL,a]]}return[]}if(typeof c=='undefined'){c=true}var f=c;var g=this.diff_commonPrefix(a,b);var h=a.substring(0,g);a=a.substring(g);b=b.substring(g);g=this.diff_commonSuffix(a,b);var i=a.substring(a.length-g);a=a.substring(0,a.length-g);b=b.substring(0,b.length-g);var j=this.diff_compute_(a,b,f,e);if(h){j.unshift([DIFF_EQUAL,h])}if(i){j.push([DIFF_EQUAL,i])}this.diff_cleanupMerge(j);return j};diff_match_patch.prototype.diff_compute_=function(a,b,c,d){var e;if(!a){return[[DIFF_INSERT,b]]}if(!b){return[[DIFF_DELETE,a]]}var f=a.length>b.length?a:b;var g=a.length>b.length?b:a;var i=f.indexOf(g);if(i!=-1){e=[[DIFF_INSERT,f.substring(0,i)],[DIFF_EQUAL,g],[DIFF_INSERT,f.substring(i+g.length)]];if(a.length>b.length){e[0][0]=e[2][0]=DIFF_DELETE}return e}if(g.length==1){return[[DIFF_DELETE,a],[DIFF_INSERT,b]]}var h=this.diff_halfMatch_(a,b);if(h){var j=h[0];var k=h[1];var l=h[2];var m=h[3];var n=h[4];var o=this.diff_main(j,l,c,d);var p=this.diff_main(k,m,c,d);return o.concat([[DIFF_EQUAL,n]],p)}if(c&&a.length>100&&b.length>100){return this.diff_lineMode_(a,b,d)}return this.diff_bisect_(a,b,d)};diff_match_patch.prototype.diff_lineMode_=function(b,c,d){var a=this.diff_linesToChars_(b,c);b=a.chars1;c=a.chars2;var e=a.lineArray;var f=this.diff_main(b,c,false,d);this.diff_charsToLines_(f,e);this.diff_cleanupSemantic(f);f.push([DIFF_EQUAL,'']);var g=0;var h=0;var i=0;var k='';var l='';while(g<f.length){switch(f[g][0]){case DIFF_INSERT:i++;l+=f[g][1];break;case DIFF_DELETE:h++;k+=f[g][1];break;case DIFF_EQUAL:if(h>=1&&i>=1){f.splice(g-h-i,h+i);g=g-h-i;var a=this.diff_main(k,l,false,d);for(var j=a.length-1;j>=0;j--){f.splice(g,0,a[j])}g=g+a.length}i=0;h=0;k='';l='';break}g++}f.pop();return f};diff_match_patch.prototype.diff_bisect_=function(a,b,c){var e=a.length;var f=b.length;var g=Math.ceil((e+f)/2);var h=g;var i=2*g;var j=new Array(i);var k=new Array(i);for(var x=0;x<i;x++){j[x]=-1;k[x]=-1}j[h+1]=0;k[h+1]=0;var l=e-f;var m=(l%2!=0);var n=0;var o=0;var p=0;var q=0;for(var d=0;d<g;d++){if((new Date()).getTime()>c){break}for(var r=-d+n;r<=d-o;r+=2){var s=h+r;var t;if(r==-d||(r!=d&&j[s-1]<j[s+1])){t=j[s+1]}else{t=j[s-1]+1}var u=t-r;while(t<e&&u<f&&a.charAt(t)==b.charAt(u)){t++;u++}j[s]=t;if(t>e){o+=2}else if(u>f){n+=2}else if(m){var v=h+l-r;if(v>=0&&v<i&&k[v]!=-1){var w=e-k[v];if(t>=w){return this.diff_bisectSplit_(a,b,t,u,c)}}}}for(var y=-d+p;y<=d-q;y+=2){var v=h+y;var w;if(y==-d||(y!=d&&k[v-1]<k[v+1])){w=k[v+1]}else{w=k[v-1]+1}var z=w-y;while(w<e&&z<f&&a.charAt(e-w-1)==b.charAt(f-z-1)){w++;z++}k[v]=w;if(w>e){q+=2}else if(z>f){p+=2}else if(!m){var s=h+l-y;if(s>=0&&s<i&&j[s]!=-1){var t=j[s];var u=h+t-s;w=e-w;if(t>=w){return this.diff_bisectSplit_(a,b,t,u,c)}}}}}return[[DIFF_DELETE,a],[DIFF_INSERT,b]]};diff_match_patch.prototype.diff_bisectSplit_=function(a,b,x,y,c){var d=a.substring(0,x);var e=b.substring(0,y);var f=a.substring(x);var g=b.substring(y);var h=this.diff_main(d,e,false,c);var i=this.diff_main(f,g,false,c);return h.concat(i)};diff_match_patch.prototype.diff_linesToChars_=function(g,h){var i=[];var j={};i[0]='';function diff_linesToCharsMunge_(a){var b='';var c=0;var d=-1;var e=i.length;while(d<a.length-1){d=a.indexOf('\n',c);if(d==-1){d=a.length-1}var f=a.substring(c,d+1);c=d+1;if(j.hasOwnProperty?j.hasOwnProperty(f):(j[f]!==undefined)){b+=String.fromCharCode(j[f])}else{b+=String.fromCharCode(e);j[f]=e;i[e++]=f}}return b}var k=diff_linesToCharsMunge_(g);var l=diff_linesToCharsMunge_(h);return{chars1:k,chars2:l,lineArray:i}};diff_match_patch.prototype.diff_charsToLines_=function(a,b){for(var x=0;x<a.length;x++){var c=a[x][1];var d=[];for(var y=0;y<c.length;y++){d[y]=b[c.charCodeAt(y)]}a[x][1]=d.join('')}};diff_match_patch.prototype.diff_commonPrefix=function(a,b){if(!a||!b||a.charAt(0)!=b.charAt(0)){return 0}var c=0;var d=Math.min(a.length,b.length);var e=d;var f=0;while(c<e){if(a.substring(f,e)==b.substring(f,e)){c=e;f=c}else{d=e}e=Math.floor((d-c)/2+c)}return e};diff_match_patch.prototype.diff_commonSuffix=function(a,b){if(!a||!b||a.charAt(a.length-1)!=b.charAt(b.length-1)){return 0}var c=0;var d=Math.min(a.length,b.length);var e=d;var f=0;while(c<e){if(a.substring(a.length-e,a.length-f)==b.substring(b.length-e,b.length-f)){c=e;f=c}else{d=e}e=Math.floor((d-c)/2+c)}return e};diff_match_patch.prototype.diff_commonOverlap_=function(a,b){var c=a.length;var d=b.length;if(c==0||d==0){return 0}if(c>d){a=a.substring(c-d)}else if(c<d){b=b.substring(0,c)}var e=Math.min(c,d);if(a==b){return e}var f=0;var g=1;while(true){var h=a.substring(e-g);var i=b.indexOf(h);if(i==-1){return f}g+=i;if(i==0||a.substring(e-g)==b.substring(0,g)){f=g;g++}}};diff_match_patch.prototype.diff_halfMatch_=function(h,k){if(this.Diff_Timeout<=0){return null}var l=h.length>k.length?h:k;var m=h.length>k.length?k:h;if(l.length<4||m.length*2<l.length){return null}var n=this;function diff_halfMatchI_(a,b,i){var c=a.substring(i,i+Math.floor(a.length/4));var j=-1;var d='';var e,best_longtext_b,best_shorttext_a,best_shorttext_b;while((j=b.indexOf(c,j+1))!=-1){var f=n.diff_commonPrefix(a.substring(i),b.substring(j));var g=n.diff_commonSuffix(a.substring(0,i),b.substring(0,j));if(d.length<g+f){d=b.substring(j-g,j)+b.substring(j,j+f);e=a.substring(0,i-g);best_longtext_b=a.substring(i+f);best_shorttext_a=b.substring(0,j-g);best_shorttext_b=b.substring(j+f)}}if(d.length*2>=a.length){return[e,best_longtext_b,best_shorttext_a,best_shorttext_b,d]}else{return null}}var o=diff_halfMatchI_(l,m,Math.ceil(l.length/4));var p=diff_halfMatchI_(l,m,Math.ceil(l.length/2));var q;if(!o&&!p){return null}else if(!p){q=o}else if(!o){q=p}else{q=o[4].length>p[4].length?o:p}var r,text1_b,text2_a,text2_b;if(h.length>k.length){r=q[0];text1_b=q[1];text2_a=q[2];text2_b=q[3]}else{text2_a=q[0];text2_b=q[1];r=q[2];text1_b=q[3]}var s=q[4];return[r,text1_b,text2_a,text2_b,s]};diff_match_patch.prototype.diff_cleanupSemantic=function(a){var b=false;var c=[];var d=0;var e=null;var f=0;var g=0;var h=0;var i=0;var j=0;while(f<a.length){if(a[f][0]==DIFF_EQUAL){c[d++]=f;g=i;h=j;i=0;j=0;e=a[f][1]}else{if(a[f][0]==DIFF_INSERT){i+=a[f][1].length}else{j+=a[f][1].length}if(e&&(e.length<=Math.max(g,h))&&(e.length<=Math.max(i,j))){a.splice(c[d-1],0,[DIFF_DELETE,e]);a[c[d-1]+1][0]=DIFF_INSERT;d--;d--;f=d>0?c[d-1]:-1;g=0;h=0;i=0;j=0;e=null;b=true}}f++}if(b){this.diff_cleanupMerge(a)}this.diff_cleanupSemanticLossless(a);f=1;while(f<a.length){if(a[f-1][0]==DIFF_DELETE&&a[f][0]==DIFF_INSERT){var k=a[f-1][1];var l=a[f][1];var m=this.diff_commonOverlap_(k,l);var n=this.diff_commonOverlap_(l,k);if(m>=n){if(m>=k.length/2||m>=l.length/2){a.splice(f,0,[DIFF_EQUAL,l.substring(0,m)]);a[f-1][1]=k.substring(0,k.length-m);a[f+1][1]=l.substring(m);f++}}else{if(n>=k.length/2||n>=l.length/2){a.splice(f,0,[DIFF_EQUAL,k.substring(0,n)]);a[f-1][0]=DIFF_INSERT;a[f-1][1]=l.substring(0,l.length-n);a[f+1][0]=DIFF_DELETE;a[f+1][1]=k.substring(n);f++}}f++}f++}};diff_match_patch.prototype.diff_cleanupSemanticLossless=function(m){function diff_cleanupSemanticScore_(a,b){if(!a||!b){return 6}var c=a.charAt(a.length-1);var d=b.charAt(0);var e=c.match(diff_match_patch.nonAlphaNumericRegex_);var f=d.match(diff_match_patch.nonAlphaNumericRegex_);var g=e&&c.match(diff_match_patch.whitespaceRegex_);var h=f&&d.match(diff_match_patch.whitespaceRegex_);var i=g&&c.match(diff_match_patch.linebreakRegex_);var j=h&&d.match(diff_match_patch.linebreakRegex_);var k=i&&a.match(diff_match_patch.blanklineEndRegex_);var l=j&&b.match(diff_match_patch.blanklineStartRegex_);if(k||l){return 5}else if(i||j){return 4}else if(e&&!g&&h){return 3}else if(g||h){return 2}else if(e||f){return 1}return 0}var n=1;while(n<m.length-1){if(m[n-1][0]==DIFF_EQUAL&&m[n+1][0]==DIFF_EQUAL){var o=m[n-1][1];var p=m[n][1];var q=m[n+1][1];var r=this.diff_commonSuffix(o,p);if(r){var s=p.substring(p.length-r);o=o.substring(0,o.length-r);p=s+p.substring(0,p.length-r);q=s+q}var t=o;var u=p;var v=q;var w=diff_cleanupSemanticScore_(o,p)+diff_cleanupSemanticScore_(p,q);while(p.charAt(0)===q.charAt(0)){o+=p.charAt(0);p=p.substring(1)+q.charAt(0);q=q.substring(1);var x=diff_cleanupSemanticScore_(o,p)+diff_cleanupSemanticScore_(p,q);if(x>=w){w=x;t=o;u=p;v=q}}if(m[n-1][1]!=t){if(t){m[n-1][1]=t}else{m.splice(n-1,1);n--}m[n][1]=u;if(v){m[n+1][1]=v}else{m.splice(n+1,1);n--}}}n++}};diff_match_patch.nonAlphaNumericRegex_=/[^a-zA-Z0-9]/;diff_match_patch.whitespaceRegex_=/\s/;diff_match_patch.linebreakRegex_=/[\r\n]/;diff_match_patch.blanklineEndRegex_=/\n\r?\n$/;diff_match_patch.blanklineStartRegex_=/^\r?\n\r?\n/;diff_match_patch.prototype.diff_cleanupEfficiency=function(a){var b=false;var c=[];var d=0;var e=null;var f=0;var g=false;var h=false;var i=false;var j=false;while(f<a.length){if(a[f][0]==DIFF_EQUAL){if(a[f][1].length<this.Diff_EditCost&&(i||j)){c[d++]=f;g=i;h=j;e=a[f][1]}else{d=0;e=null}i=j=false}else{if(a[f][0]==DIFF_DELETE){j=true}else{i=true}if(e&&((g&&h&&i&&j)||((e.length<this.Diff_EditCost/2)&&(g+h+i+j)==3))){a.splice(c[d-1],0,[DIFF_DELETE,e]);a[c[d-1]+1][0]=DIFF_INSERT;d--;e=null;if(g&&h){i=j=true;d=0}else{d--;f=d>0?c[d-1]:-1;i=j=false}b=true}}f++}if(b){this.diff_cleanupMerge(a)}};diff_match_patch.prototype.diff_cleanupMerge=function(a){a.push([DIFF_EQUAL,'']);var b=0;var c=0;var d=0;var e='';var f='';var g;while(b<a.length){switch(a[b][0]){case DIFF_INSERT:d++;f+=a[b][1];b++;break;case DIFF_DELETE:c++;e+=a[b][1];b++;break;case DIFF_EQUAL:if(c+d>1){if(c!==0&&d!==0){g=this.diff_commonPrefix(f,e);if(g!==0){if((b-c-d)>0&&a[b-c-d-1][0]==DIFF_EQUAL){a[b-c-d-1][1]+=f.substring(0,g)}else{a.splice(0,0,[DIFF_EQUAL,f.substring(0,g)]);b++}f=f.substring(g);e=e.substring(g)}g=this.diff_commonSuffix(f,e);if(g!==0){a[b][1]=f.substring(f.length-g)+a[b][1];f=f.substring(0,f.length-g);e=e.substring(0,e.length-g)}}if(c===0){a.splice(b-d,c+d,[DIFF_INSERT,f])}else if(d===0){a.splice(b-c,c+d,[DIFF_DELETE,e])}else{a.splice(b-c-d,c+d,[DIFF_DELETE,e],[DIFF_INSERT,f])}b=b-c-d+(c?1:0)+(d?1:0)+1}else if(b!==0&&a[b-1][0]==DIFF_EQUAL){a[b-1][1]+=a[b][1];a.splice(b,1)}else{b++}d=0;c=0;e='';f='';break}}if(a[a.length-1][1]===''){a.pop()}var h=false;b=1;while(b<a.length-1){if(a[b-1][0]==DIFF_EQUAL&&a[b+1][0]==DIFF_EQUAL){if(a[b][1].substring(a[b][1].length-a[b-1][1].length)==a[b-1][1]){a[b][1]=a[b-1][1]+a[b][1].substring(0,a[b][1].length-a[b-1][1].length);a[b+1][1]=a[b-1][1]+a[b+1][1];a.splice(b-1,1);h=true}else if(a[b][1].substring(0,a[b+1][1].length)==a[b+1][1]){a[b-1][1]+=a[b+1][1];a[b][1]=a[b][1].substring(a[b+1][1].length)+a[b+1][1];a.splice(b+1,1);h=true}}b++}if(h){this.diff_cleanupMerge(a)}};diff_match_patch.prototype.diff_xIndex=function(a,b){var c=0;var d=0;var e=0;var f=0;var x;for(x=0;x<a.length;x++){if(a[x][0]!==DIFF_INSERT){c+=a[x][1].length}if(a[x][0]!==DIFF_DELETE){d+=a[x][1].length}if(c>b){break}e=c;f=d}if(a.length!=x&&a[x][0]===DIFF_DELETE){return f}return f+(b-e)};diff_match_patch.prototype.diff_prettyHtml=function(a){var b=[];var c=/&/g;var d=/</g;var e=/>/g;var f=/\n/g;for(var x=0;x<a.length;x++){var g=a[x][0];var h=a[x][1];var i=h.replace(c,'&amp;').replace(d,'&lt;').replace(e,'&gt;').replace(f,'&para;<br>');switch(g){case DIFF_INSERT:b[x]='<ins style="background:#e6ffe6;">'+i+'</ins>';break;case DIFF_DELETE:b[x]='<del style="background:#ffe6e6;">'+i+'</del>';break;case DIFF_EQUAL:b[x]='<span>'+i+'</span>';break}}return b.join('')};diff_match_patch.prototype.diff_text1=function(a){var b=[];for(var x=0;x<a.length;x++){if(a[x][0]!==DIFF_INSERT){b[x]=a[x][1]}}return b.join('')};diff_match_patch.prototype.diff_text2=function(a){var b=[];for(var x=0;x<a.length;x++){if(a[x][0]!==DIFF_DELETE){b[x]=a[x][1]}}return b.join('')};diff_match_patch.prototype.diff_levenshtein=function(a){var b=0;var c=0;var d=0;for(var x=0;x<a.length;x++){var e=a[x][0];var f=a[x][1];switch(e){case DIFF_INSERT:c+=f.length;break;case DIFF_DELETE:d+=f.length;break;case DIFF_EQUAL:b+=Math.max(c,d);c=0;d=0;break}}b+=Math.max(c,d);return b};diff_match_patch.prototype.diff_toDelta=function(a){var b=[];for(var x=0;x<a.length;x++){switch(a[x][0]){case DIFF_INSERT:b[x]='+'+encodeURI(a[x][1]);break;case DIFF_DELETE:b[x]='-'+a[x][1].length;break;case DIFF_EQUAL:b[x]='='+a[x][1].length;break}}return b.join('\t').replace(/%20/g,' ')};diff_match_patch.prototype.diff_fromDelta=function(a,b){var c=[];var d=0;var e=0;var f=b.split(/\t/g);for(var x=0;x<f.length;x++){var g=f[x].substring(1);switch(f[x].charAt(0)){case'+':try{c[d++]=[DIFF_INSERT,decodeURI(g)]}catch(ex){throw new Error('Illegal escape in diff_fromDelta: '+g);}break;case'-':case'=':var n=parseInt(g,10);if(isNaN(n)||n<0){throw new Error('Invalid number in diff_fromDelta: '+g);}var h=a.substring(e,e+=n);if(f[x].charAt(0)=='='){c[d++]=[DIFF_EQUAL,h]}else{c[d++]=[DIFF_DELETE,h]}break;default:if(f[x]){throw new Error('Invalid diff operation in diff_fromDelta: '+f[x]);}}}if(e!=a.length){throw new Error('Delta length ('+e+') does not equal source text length ('+a.length+').');}return c};diff_match_patch.prototype.match_main=function(a,b,c){if(a==null||b==null||c==null){throw new Error('Null input. (match_main)');}c=Math.max(0,Math.min(c,a.length));if(a==b){return 0}else if(!a.length){return-1}else if(a.substring(c,c+b.length)==b){return c}else{return this.match_bitap_(a,b,c)}};diff_match_patch.prototype.match_bitap_=function(c,f,g){if(f.length>this.Match_MaxBits){throw new Error('Pattern too long for this browser.');}var s=this.match_alphabet_(f);var h=this;function match_bitapScore_(e,x){var a=e/f.length;var b=Math.abs(g-x);if(!h.Match_Distance){return b?1.0:a}return a+(b/h.Match_Distance)}var i=this.Match_Threshold;var k=c.indexOf(f,g);if(k!=-1){i=Math.min(match_bitapScore_(0,k),i);k=c.lastIndexOf(f,g+f.length);if(k!=-1){i=Math.min(match_bitapScore_(0,k),i)}}var l=1<<(f.length-1);k=-1;var m,bin_mid;var n=f.length+c.length;var o;for(var d=0;d<f.length;d++){m=0;bin_mid=n;while(m<bin_mid){if(match_bitapScore_(d,g+bin_mid)<=i){m=bin_mid}else{n=bin_mid}bin_mid=Math.floor((n-m)/2+m)}n=bin_mid;var p=Math.max(1,g-bin_mid+1);var q=Math.min(g+bin_mid,c.length)+f.length;var r=Array(q+2);r[q+1]=(1<<d)-1;for(var j=q;j>=p;j--){var t=s[c.charAt(j-1)];if(d===0){r[j]=((r[j+1]<<1)|1)&t}else{r[j]=(((r[j+1]<<1)|1)&t)|(((o[j+1]|o[j])<<1)|1)|o[j+1]}if(r[j]&l){var u=match_bitapScore_(d,j-1);if(u<=i){i=u;k=j-1;if(k>g){p=Math.max(1,2*g-k)}else{break}}}}if(match_bitapScore_(d+1,g)>i){break}o=r}return k};diff_match_patch.prototype.match_alphabet_=function(a){var s={};for(var i=0;i<a.length;i++){s[a.charAt(i)]=0}for(var i=0;i<a.length;i++){s[a.charAt(i)]|=1<<(a.length-i-1)}return s};diff_match_patch.prototype.patch_addContext_=function(a,b){if(b.length==0){return}var c=b.substring(a.start2,a.start2+a.length1);var d=0;while(b.indexOf(c)!=b.lastIndexOf(c)&&c.length<this.Match_MaxBits-this.Patch_Margin-this.Patch_Margin){d+=this.Patch_Margin;c=b.substring(a.start2-d,a.start2+a.length1+d)}d+=this.Patch_Margin;var e=b.substring(a.start2-d,a.start2);if(e){a.diffs.unshift([DIFF_EQUAL,e])}var f=b.substring(a.start2+a.length1,a.start2+a.length1+d);if(f){a.diffs.push([DIFF_EQUAL,f])}a.start1-=e.length;a.start2-=e.length;a.length1+=e.length+f.length;a.length2+=e.length+f.length};diff_match_patch.prototype.patch_make=function(a,b,c){var d,diffs;if(typeof a=='string'&&typeof b=='string'&&typeof c=='undefined'){d=(a);diffs=this.diff_main(d,(b),true);if(diffs.length>2){this.diff_cleanupSemantic(diffs);this.diff_cleanupEfficiency(diffs)}}else if(a&&typeof a=='object'&&typeof b=='undefined'&&typeof c=='undefined'){diffs=(a);d=this.diff_text1(diffs)}else if(typeof a=='string'&&b&&typeof b=='object'&&typeof c=='undefined'){d=(a);diffs=(b)}else if(typeof a=='string'&&typeof b=='string'&&c&&typeof c=='object'){d=(a);diffs=(c)}else{throw new Error('Unknown call format to patch_make.');}if(diffs.length===0){return[]}var e=[];var f=new diff_match_patch.patch_obj();var g=0;var h=0;var i=0;var j=d;var k=d;for(var x=0;x<diffs.length;x++){var l=diffs[x][0];var m=diffs[x][1];if(!g&&l!==DIFF_EQUAL){f.start1=h;f.start2=i}switch(l){case DIFF_INSERT:f.diffs[g++]=diffs[x];f.length2+=m.length;k=k.substring(0,i)+m+k.substring(i);break;case DIFF_DELETE:f.length1+=m.length;f.diffs[g++]=diffs[x];k=k.substring(0,i)+k.substring(i+m.length);break;case DIFF_EQUAL:if(m.length<=2*this.Patch_Margin&&g&&diffs.length!=x+1){f.diffs[g++]=diffs[x];f.length1+=m.length;f.length2+=m.length}else if(m.length>=2*this.Patch_Margin){if(g){this.patch_addContext_(f,j);e.push(f);f=new diff_match_patch.patch_obj();g=0;j=k;h=i}}break}if(l!==DIFF_INSERT){h+=m.length}if(l!==DIFF_DELETE){i+=m.length}}if(g){this.patch_addContext_(f,j);e.push(f)}return e};diff_match_patch.prototype.patch_deepCopy=function(a){var b=[];for(var x=0;x<a.length;x++){var c=a[x];var d=new diff_match_patch.patch_obj();d.diffs=[];for(var y=0;y<c.diffs.length;y++){d.diffs[y]=c.diffs[y].slice()}d.start1=c.start1;d.start2=c.start2;d.length1=c.length1;d.length2=c.length2;b[x]=d}return b};diff_match_patch.prototype.patch_apply=function(a,b){if(a.length==0){return[b,[]]}a=this.patch_deepCopy(a);var c=this.patch_addPadding(a);b=c+b+c;this.patch_splitMax(a);var d=0;var e=[];for(var x=0;x<a.length;x++){var f=a[x].start2+d;var g=this.diff_text1(a[x].diffs);var h;var i=-1;if(g.length>this.Match_MaxBits){h=this.match_main(b,g.substring(0,this.Match_MaxBits),f);if(h!=-1){i=this.match_main(b,g.substring(g.length-this.Match_MaxBits),f+g.length-this.Match_MaxBits);if(i==-1||h>=i){h=-1}}}else{h=this.match_main(b,g,f)}if(h==-1){e[x]=false;d-=a[x].length2-a[x].length1}else{e[x]=true;d=h-f;var j;if(i==-1){j=b.substring(h,h+g.length)}else{j=b.substring(h,i+this.Match_MaxBits)}if(g==j){b=b.substring(0,h)+this.diff_text2(a[x].diffs)+b.substring(h+g.length)}else{var k=this.diff_main(g,j,false);if(g.length>this.Match_MaxBits&&this.diff_levenshtein(k)/g.length>this.Patch_DeleteThreshold){e[x]=false}else{this.diff_cleanupSemanticLossless(k);var l=0;var m;for(var y=0;y<a[x].diffs.length;y++){var n=a[x].diffs[y];if(n[0]!==DIFF_EQUAL){m=this.diff_xIndex(k,l)}if(n[0]===DIFF_INSERT){b=b.substring(0,h+m)+n[1]+b.substring(h+m)}else if(n[0]===DIFF_DELETE){b=b.substring(0,h+m)+b.substring(h+this.diff_xIndex(k,l+n[1].length))}if(n[0]!==DIFF_DELETE){l+=n[1].length}}}}}}b=b.substring(c.length,b.length-c.length);return[b,e]};diff_match_patch.prototype.patch_addPadding=function(a){var b=this.Patch_Margin;var c='';for(var x=1;x<=b;x++){c+=String.fromCharCode(x)}for(var x=0;x<a.length;x++){a[x].start1+=b;a[x].start2+=b}var d=a[0];var e=d.diffs;if(e.length==0||e[0][0]!=DIFF_EQUAL){e.unshift([DIFF_EQUAL,c]);d.start1-=b;d.start2-=b;d.length1+=b;d.length2+=b}else if(b>e[0][1].length){var f=b-e[0][1].length;e[0][1]=c.substring(e[0][1].length)+e[0][1];d.start1-=f;d.start2-=f;d.length1+=f;d.length2+=f}d=a[a.length-1];e=d.diffs;if(e.length==0||e[e.length-1][0]!=DIFF_EQUAL){e.push([DIFF_EQUAL,c]);d.length1+=b;d.length2+=b}else if(b>e[e.length-1][1].length){var f=b-e[e.length-1][1].length;e[e.length-1][1]+=c.substring(0,f);d.length1+=f;d.length2+=f}return c};diff_match_patch.prototype.patch_splitMax=function(a){var b=this.Match_MaxBits;for(var x=0;x<a.length;x++){if(a[x].length1<=b){continue}var c=a[x];a.splice(x--,1);var d=c.start1;var e=c.start2;var f='';while(c.diffs.length!==0){var g=new diff_match_patch.patch_obj();var h=true;g.start1=d-f.length;g.start2=e-f.length;if(f!==''){g.length1=g.length2=f.length;g.diffs.push([DIFF_EQUAL,f])}while(c.diffs.length!==0&&g.length1<b-this.Patch_Margin){var i=c.diffs[0][0];var j=c.diffs[0][1];if(i===DIFF_INSERT){g.length2+=j.length;e+=j.length;g.diffs.push(c.diffs.shift());h=false}else if(i===DIFF_DELETE&&g.diffs.length==1&&g.diffs[0][0]==DIFF_EQUAL&&j.length>2*b){g.length1+=j.length;d+=j.length;h=false;g.diffs.push([i,j]);c.diffs.shift()}else{j=j.substring(0,b-g.length1-this.Patch_Margin);g.length1+=j.length;d+=j.length;if(i===DIFF_EQUAL){g.length2+=j.length;e+=j.length}else{h=false}g.diffs.push([i,j]);if(j==c.diffs[0][1]){c.diffs.shift()}else{c.diffs[0][1]=c.diffs[0][1].substring(j.length)}}}f=this.diff_text2(g.diffs);f=f.substring(f.length-this.Patch_Margin);var k=this.diff_text1(c.diffs).substring(0,this.Patch_Margin);if(k!==''){g.length1+=k.length;g.length2+=k.length;if(g.diffs.length!==0&&g.diffs[g.diffs.length-1][0]===DIFF_EQUAL){g.diffs[g.diffs.length-1][1]+=k}else{g.diffs.push([DIFF_EQUAL,k])}}if(!h){a.splice(++x,0,g)}}}};diff_match_patch.prototype.patch_toText=function(a){var b=[];for(var x=0;x<a.length;x++){b[x]=a[x]}return b.join('')};diff_match_patch.prototype.patch_fromText=function(a){var b=[];if(!a){return b}var c=a.split('\n');var d=0;var e=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;while(d<c.length){var m=c[d].match(e);if(!m){throw new Error('Invalid patch string: '+c[d]);}var f=new diff_match_patch.patch_obj();b.push(f);f.start1=parseInt(m[1],10);if(m[2]===''){f.start1--;f.length1=1}else if(m[2]=='0'){f.length1=0}else{f.start1--;f.length1=parseInt(m[2],10)}f.start2=parseInt(m[3],10);if(m[4]===''){f.start2--;f.length2=1}else if(m[4]=='0'){f.length2=0}else{f.start2--;f.length2=parseInt(m[4],10)}d++;while(d<c.length){var g=c[d].charAt(0);try{var h=decodeURI(c[d].substring(1))}catch(ex){throw new Error('Illegal escape in patch_fromText: '+h);}if(g=='-'){f.diffs.push([DIFF_DELETE,h])}else if(g=='+'){f.diffs.push([DIFF_INSERT,h])}else if(g==' '){f.diffs.push([DIFF_EQUAL,h])}else if(g=='@'){break}else if(g===''){}else{throw new Error('Invalid patch mode "'+g+'" in: '+h);}d++}}return b};diff_match_patch.patch_obj=function(){this.diffs=[];this.start1=null;this.start2=null;this.length1=0;this.length2=0};diff_match_patch.patch_obj.prototype.toString=function(){var a,coords2;if(this.length1===0){a=this.start1+',0'}else if(this.length1==1){a=this.start1+1}else{a=(this.start1+1)+','+this.length1}if(this.length2===0){coords2=this.start2+',0'}else if(this.length2==1){coords2=this.start2+1}else{coords2=(this.start2+1)+','+this.length2}var b=['@@ -'+a+' +'+coords2+' @@\n'];var c;for(var x=0;x<this.diffs.length;x++){switch(this.diffs[x][0]){case DIFF_INSERT:c='+';break;case DIFF_DELETE:c='-';break;case DIFF_EQUAL:c=' ';break}b[x+1]=c+encodeURI(this.diffs[x][1])+'\n'}return b.join('').replace(/%20/g,' ')};this['diff_match_patch']=diff_match_patch;this['DIFF_DELETE']=DIFF_DELETE;this['DIFF_INSERT']=DIFF_INSERT;this['DIFF_EQUAL']=DIFF_EQUAL;